<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/></head><body><pre><a name="1"></a>#<font color="red">include </font>"blah.h"
<a name="2"></a>
<a name="3"></a><font color="blue">int </font>foo() {
<a name="4"></a>    // Notice how there's a 4:7 ratio of asm to source lines here - this ratio
<a name="5"></a>    // can be aribtrary
<a name="6"></a>    <font color="blue">int </font>x = 0;
<a name="7"></a>    <font color="red">for </font>(<font color="blue">int </font>i = 0; i < 100; ++i) {
<a name="8"></a>        <a href="foo.html#6">x</a> += <a href="foo.html#7">i</a>;
<a name="9"></a>    }
<a name="10"></a>    printf</a>("%d\n", <a href="foo.html#6">x</a>);
<a name="11"></a>    <font color="red">return </font><a href="foo.html#6">x</a>;
<a name="12"></a>}
<a name="13"></a>
<a name="14"></a>static void NO_INLINE bar</a>() {
<a name="15"></a>    // This is just to make sure this function doesn't get optimized out
<a name="16"></a>    asm("");
<a name="17"></a>}
<a name="18"></a>
<a name="19"></a>void NO_INLINE complicated_func() {
<a name="20"></a>    <font color="blue">int </font><a href="foo.html#6">x</a>;
<a name="21"></a>    scanf</a>("%d\n", &x);
<a name="22"></a>    volatile <font color="blue">int </font>y = <a href="foo.html#20">x</a>;
<a name="23"></a>
<a name="24"></a>    do {
<a name="25"></a>        <font color="red">for </font>(<font color="blue">int </font><a href="foo.html#7">i</a> = 0; <a href="foo.html#7">i</a> < 2; ++<a href="foo.html#7">i</a>) {
<a name="26"></a>            <a href="foo.html#22">y</a> += <a href="foo.html#25">i</a>;
<a name="27"></a>            printf</a>("%d\n", <a href="foo.html#22">y</a>);
<a name="28"></a>        }
<a name="29"></a>    } <font color="red">while </font>(<a href="foo.html#22">y</a> == 7);
<a name="30"></a>
<a name="31"></a>    printf</a>("%d\n", <a href="foo.html#22">y</a>);
<a name="32"></a>}
<a name="33"></a>
<a name="34"></a><font color="blue">int </font>main() {
<a name="35"></a>    // which bar?
<a name="36"></a>    bar</a>();
<a name="37"></a>    complicated_func</a>();
<a name="38"></a>    // Notice that the source before this comes from a different file
<a name="39"></a>    blah</a>();
<a name="40"></a>    <font color="red">return </font>0;
<a name="41"></a>}
<a name="42"></a><a name="42"></a>#<font color="red">include </font>&lt;stdio.h&gt;
<a name="2"></a>#define NO_INLINE __attribute__((noinline))
<a name="3"></a>
<a name="4"></a>inline <font color="blue">int </font>blah() {
<a name="5"></a>    <font color="blue">int </font>x;
<a name="6"></a>    scanf</a>("%d", &x);
<a name="7"></a>    <font color="red">return </font><a href="blah_header.html#5">x</a>;
<a name="8"></a>}
<a name="9"></a><a name="9"></a>#<font color="red">include </font>"blah.h"
<a name="2"></a>
<a name="3"></a><font color="blue">int </font>foo() {
<a name="4"></a>    // Notice how there's a 4:7 ratio of asm to source lines here - this ratio
<a name="5"></a>    // can be aribtrary
<a name="6"></a>    <font color="blue">int </font>x = 0;
<a name="7"></a>    <font color="red">for </font>(<font color="blue">int </font>i = 0; i < 100; ++i) {
<a name="8"></a>        <a href="foo.html#6">x</a> += <a href="foo.html#7">i</a>;
<a name="9"></a>    }
<a name="10"></a>    printf</a>("%d\n", <a href="foo.html#6">x</a>);
<a name="11"></a>    <font color="red">return </font><a href="foo.html#6">x</a>;
<a name="12"></a>}
<a name="13"></a>
<a name="14"></a>static void NO_INLINE bar</a>() {
<a name="15"></a>    // This is just to make sure this function doesn't get optimized out
<a name="16"></a>    asm("");
<a name="17"></a>}
<a name="18"></a>
<a name="19"></a>void NO_INLINE complicated_func() {
<a name="20"></a>    <font color="blue">int </font><a href="foo.html#6">x</a>;
<a name="21"></a>    scanf</a>("%d\n", &x);
<a name="22"></a>    volatile <font color="blue">int </font>y = <a href="foo.html#20">x</a>;
<a name="23"></a>
<a name="24"></a>    do {
<a name="25"></a>        <font color="red">for </font>(<font color="blue">int </font><a href="foo.html#7">i</a> = 0; <a href="foo.html#7">i</a> < 2; ++<a href="foo.html#7">i</a>) {
<a name="26"></a>            <a href="foo.html#22">y</a> += <a href="foo.html#25">i</a>;
<a name="27"></a>            printf</a>("%d\n", <a href="foo.html#22">y</a>);
<a name="28"></a>        }
<a name="29"></a>    } <font color="red">while </font>(<a href="foo.html#22">y</a> == 7);
<a name="30"></a>
<a name="31"></a>    printf</a>("%d\n", <a href="foo.html#22">y</a>);
<a name="32"></a>}
<a name="33"></a>
<a name="34"></a><font color="blue">int </font>main() {
<a name="35"></a>    // which bar?
<a name="36"></a>    bar</a>();
<a name="37"></a>    complicated_func</a>();
<a name="38"></a>    // Notice that the source before this comes from a different file
<a name="39"></a>    blah</a>();
<a name="40"></a>    <font color="red">return </font>0;
<a name="41"></a>}
<a name="42"></a><a name="42"></a>#<font color="red">include </font>"blah.h"
<a name="2"></a>
<a name="3"></a>static void NO_INLINE bar</a>() {
<a name="4"></a>    asm("");
<a name="5"></a>}
<a name="6"></a>
<a name="7"></a>void func() {
<a name="8"></a>    // which bar?
<a name="9"></a>    bar</a>();
<a name="10"></a>}
<a name="11"></a></pre></body></html>